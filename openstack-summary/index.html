<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=zh-CN lang=zh-cn><head><link href=//gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.80.0"><meta name=viewport content="width=device-width,initial-scale=1"><title>云计算部署实战课程资源汇总 &#183; Heis</title><link type=text/css rel=stylesheet href=https://huangzhiyi.github.io/css/heis-min.css?638><link type=text/css id=dark_theme_css rel=stylesheet href=https://huangzhiyi.github.io/css/a11y-dark.css title=dark><link type=text/css id=light_theme_css rel="alternate stylesheet" href=https://huangzhiyi.github.io/css/a11y-light.css title=light><script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?f58b6a2675cf52000232edb4d109eccc";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed2.png><link rel="shortcut icon" href=/favicon2.png><script src=https://huangzhiyi.github.io/js/jquery-min.js></script></head><body><aside class=sidebar id=bsidebar><button id=hide-sb-btn onclick=hideSidebar()></button><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://huangzhiyi.github.io/><h1 id=side-title>Heis</h1></a><p class=lead>Long live MAMBA</p><p class=ac><a href=https://support.qq.com/products/332688 class=tooltip target=_blank><img class=tooltiptext src=https://huangzhiyi.github.io/feedback.png?20210617>
提点意见和建议»</a></p></div><nav><ul class=sidebar-nav><li><a href=https://huangzhiyi.github.io/>首页</a></li><li><a href=https://huangzhiyi.github.io/categories/javaweb/>Java后台应用项目开发»</a></li><li><a href=https://huangzhiyi.github.io/categories/clouddc/>云数据中心基础»</a></li><li><a href=https://huangzhiyi.github.io/categories/webtraining/>Web企业级项目实战»</a></li><li><a href=https://huangzhiyi.github.io/categories>文章分类»</a></li><li><a href=https://huangzhiyi.github.io/tags>文章标签»</a></li><li><a href=https://heis.gitee.io/ target=_blank>镜像0：heis.gitee.io</a></li><li><a href=http://heisun.xyz/ target=_blank>镜像1：heisun.xyz</a></li><li><a href=https://huangzhiyi.github.io/ target=_blank>镜像2：huangzhiyi.github.io</a></li></ul></nav><p>&copy; 2021. All rights reserved.</p><p></p></div></aside><main class="content container" id=mainpanel><button id=show-sb-btn onclick=showSidebar()></button><div class=post><h1>云计算部署实战课程资源汇总</h1><time datetime=2021-02-26T16:42:51+0800 class=post-date>2021-02-26</time><blockquote><h2>文章导航</h2><aside><nav id=TableOfContents><ul><li><a href=#版本>【版本】</a></li><li><a href=#课程设计模板下载>课程设计模板下载</a></li><li><a href=#课程设计要求>课程设计要求</a></li><li><a href=#实验报告提交截止时间和地址>实验报告提交截止时间和地址</a></li><li><a href=#课程内容>课程内容</a><ul><li><a href=#1云计算部署实战part1---制作centos-模板镜像openstack-exp1>（1）<a href=/openstack-exp1>云计算部署实战Part1 - 制作CentOS 模板镜像</a></a></li><li><a href=#2云计算部署实战part2---配置计算节点和控制节点openstack-exp2>（2）<a href=/openstack-exp2>云计算部署实战Part2 - 配置计算节点和控制节点</a></a></li><li><a href=#3云计算部署实战part3---安装keystone认证服务openstack-exp3>（3）<a href=/openstack-exp3>云计算部署实战Part3 - 安装Keystone认证服务</a></a></li><li><a href=#4云计算部署实战part4---安装-glance-镜像服务openstack-exp4>（4）<a href=/openstack-exp4>云计算部署实战Part4 - 安装 Glance 镜像服务</a></a></li><li><a href=#5云计算部署实战part5---安装-nova-计算服务openstack-exp5>（5）<a href=/openstack-exp5>云计算部署实战Part5 - 安装 nova 计算服务</a></a></li><li><a href=#6云计算部署实战part6---安装-neutron-网络服务openstack-exp6>（6）<a href=/openstack-exp6>云计算部署实战Part6 - 安装 Neutron 网络服务</a></a></li><li><a href=#7云计算部署实战part7---安装-dashboardopenstack-exp7>（7）<a href=/openstack-exp7>云计算部署实战Part7 - 安装 Dashboard</a></a></li><li><a href=#8云计算部署实战part8---启动一个镜像实例openstack-exp8>（8）<a href=/openstack-exp8>云计算部署实战Part8 - 启动一个镜像实例</a></a></li><li><a href=#9云计算部署实战part9---增加一个计算节点openstack-exp9>（9）<a href=/openstack-exp9>云计算部署实战Part9 - 增加一个计算节点</a></a></li></ul></li><li><a href=#课程设计提交>课程设计提交</a><ul><li><a href=#1第1次课程设计报告提交包含part1>（1）第1次课程设计报告提交（包含Part1）</a></li><li><a href=#2第2次课程设计报告提交包含part1-part4>（2）第2次课程设计报告提交（包含Part1-Part4）</a></li><li><a href=#3最终课程设计报告提交包含part1-part9>（3）最终课程设计报告提交（包含Part1-Part9）</a></li></ul></li><li><a href=#openstack官方手册>Openstack官方手册</a></li><li><a href=#常用命令>常用命令</a><ul><li><a href=#vivim-命令图>vi/vim 命令图</a></li><li><a href=#查看ip地址等网络配置信息>查看IP地址等网络配置信息</a></li><li><a href=#修改包括ip等网络配置命令>修改包括IP等网络配置命令</a></li><li><a href=#查看进程端口等信息>查看进程端口等信息</a></li><li><a href=#卸载软件>卸载软件</a></li><li><a href=#查看服务日志>查看服务日志</a></li><li><a href=#publicurl-endpoint-for-compute-service-not-found>publicURL endpoint for compute service not found</a></li><li><a href=#查看系统所有相关服务状态>查看系统所有相关服务状态</a></li><li><a href=#查看系统某项服务状态>查看系统某项服务状态</a></li><li><a href=#系统服务状态解释>系统服务状态解释</a></li><li><a href=#openstack-查看信息相关命令>Openstack 查看信息相关命令</a></li><li><a href=#修改系统时间>修改系统时间</a></li><li><a href=#mysqlmariadb-常用命令>MySQL/MariaDB 常用命令</a></li></ul></li><li><a href=#常见错误解决办法>常见错误解决办法</a><ul><li><a href=#1-登录-dashboardhorizon-web界面提示身份验证令牌已经过期>1. 登录 Dashboard(Horizon) Web界面提示身份验证令牌已经过期</a></li><li><a href=#2-登录-dashboardhorizon-提示无法连接-keystone>2. 登录 Dashboard(Horizon) 提示无法连接 Keystone</a></li></ul></li></ul></nav></aside></blockquote><h2 id=版本>【版本】</h2><p>当前版本号<code>v20210324</code></p><div class=tbl-start></div><table><thead><tr><th>版本</th><th>修改说明</th></tr></thead><tbody><tr><td>v20210324</td><td>增加常见错误分析和常用命令</td></tr><tr><td>v20210227</td><td>初始化版本</td></tr></tbody></table><div class=tbl-end style=height:10px></div><h2 id=课程设计模板下载>课程设计模板下载</h2><h2 id=课程设计要求>课程设计要求</h2><ul><li>必须使用老师提供的课程设计模板。</li><li>必须保留封面</li><li>实验步骤每一步都有详细的文字操作步骤说明，步骤顺序号，截图。</li><li>截图只需要截关键部分信息，不能全屏截图。可以用红色框或箭头标注截图重点信息。推荐使用 Snipaste（<a href=https://zh.snipaste.com/>官网下载</a>或<a href=https://pan.baidu.com/s/1yOkP9voQ9X5MmKUk2mOE6g#%E6%8F%90%E5%8F%96%E7%A0%81fsln>网盘下载</a>） 进行截图和标记。</li></ul><h2 id=实验报告提交截止时间和地址>实验报告提交截止时间和地址</h2><p>后续会公布链接，请各位同学登录网站 <a href=https://heis.gitee.io/openstack-summary>https://heis.gitee.io/openstack-summary</a>查看。</p><h2 id=课程内容>课程内容</h2><h3 id=1云计算部署实战part1---制作centos-模板镜像openstack-exp1>（1）<a href=/openstack-exp1>云计算部署实战Part1 - 制作CentOS 模板镜像</a></h3><h3 id=2云计算部署实战part2---配置计算节点和控制节点openstack-exp2>（2）<a href=/openstack-exp2>云计算部署实战Part2 - 配置计算节点和控制节点</a></h3><h3 id=3云计算部署实战part3---安装keystone认证服务openstack-exp3>（3）<a href=/openstack-exp3>云计算部署实战Part3 - 安装Keystone认证服务</a></h3><h3 id=4云计算部署实战part4---安装-glance-镜像服务openstack-exp4>（4）<a href=/openstack-exp4>云计算部署实战Part4 - 安装 Glance 镜像服务</a></h3><h3 id=5云计算部署实战part5---安装-nova-计算服务openstack-exp5>（5）<a href=/openstack-exp5>云计算部署实战Part5 - 安装 nova 计算服务</a></h3><h3 id=6云计算部署实战part6---安装-neutron-网络服务openstack-exp6>（6）<a href=/openstack-exp6>云计算部署实战Part6 - 安装 Neutron 网络服务</a></h3><h3 id=7云计算部署实战part7---安装-dashboardopenstack-exp7>（7）<a href=/openstack-exp7>云计算部署实战Part7 - 安装 Dashboard</a></h3><h3 id=8云计算部署实战part8---启动一个镜像实例openstack-exp8>（8）<a href=/openstack-exp8>云计算部署实战Part8 - 启动一个镜像实例</a></h3><h3 id=9云计算部署实战part9---增加一个计算节点openstack-exp9>（9）<a href=/openstack-exp9>云计算部署实战Part9 - 增加一个计算节点</a></h3><h2 id=课程设计提交>课程设计提交</h2><h3 id=1第1次课程设计报告提交包含part1>（1）第1次课程设计报告提交（包含Part1）</h3><ul><li>19级计机4班——提交截止时间：3月3日（星期三）；提交地址：<a href=http://xzc.cn/tvNn8F0RvH target=_blank><a href=http://xzc.cn/tvNn8F0RvH>http://xzc.cn/tvNn8F0RvH</a></a></li><li>19级计机2班——提交截止时间：3月17日（星期三）；提交地址：<a href=http://xzc.cn/RkaoTcAAT6 target=_blank><a href=http://xzc.cn/RkaoTcAAT6>http://xzc.cn/RkaoTcAAT6</a></a></li></ul><h3 id=2第2次课程设计报告提交包含part1-part4>（2）第2次课程设计报告提交（包含Part1-Part4）</h3><ul><li>19级计机4班——提交截止时间：3月6日（星期六）；提交地址：<a href=http://xzc.cn/HG57s0067o target=_blank><a href=http://xzc.cn/HG57s0067o>http://xzc.cn/HG57s0067o</a></a></li><li>19级计机2班——提交截止时间：3月20日（星期六）；提交地址：<a href=http://xzc.cn/tlDB8zD1G9 target=_blank><a href=http://xzc.cn/tlDB8zD1G9>http://xzc.cn/tlDB8zD1G9</a></a></li></ul><h3 id=3最终课程设计报告提交包含part1-part9>（3）最终课程设计报告提交（包含Part1-Part9）</h3><ul><li>19级计机4班——提交截止时间：3月6日（星期六）；提交地址：<a href=http://xzc.cn/c8kB1yCkEZ target=_blank><a href=http://xzc.cn/c8kB1yCkEZ>http://xzc.cn/c8kB1yCkEZ</a></a></li><li>19级计机2班——提交截止时间：3月27日（星期六）；提交地址：<a href=http://xzc.cn/K0700iM7X1 target=_blank><a href=http://xzc.cn/K0700iM7X1>http://xzc.cn/K0700iM7X1</a></a></li></ul><h2 id=openstack官方手册>Openstack官方手册</h2><p><a href=/static/openstack-manuals/index.html target=_blank>官方手册链接</a></p><h2 id=常用命令>常用命令</h2><h3 id=vivim-命令图>vi/vim 命令图</h3><p><img src=/static/img/openstack-exp01/vim.png alt></p><h3 id=查看ip地址等网络配置信息>查看IP地址等网络配置信息</h3><pre><code>ip a
</code></pre><h3 id=修改包括ip等网络配置命令>修改包括IP等网络配置命令</h3><pre><code>#如果你的网卡名为eth0
vim /etc/sysconfig/network-scripts/ifcfg-eth0
#如果你的网卡名为ens33
vim /etc/sysconfig/network-scripts/ifcfg-ens33
</code></pre><pre><code>#地址
IPADDR=10.0.0.11
#掩码
PREFIX=24
#网关
GATEWAY=10.0.0.254
#DNS1
DNS1=233.5.5.5
</code></pre><h3 id=查看进程端口等信息>查看进程端口等信息</h3><ul><li>查看所有进程消息</li></ul><pre><code>netstat -tulpn
</code></pre><ul><li>查看进程信息包含 mysql 的进程</li></ul><pre><code>netstat -tulpn|grep mysql
</code></pre><ul><li>查看非本机的端口可以使用<code>nmap</code>命令
安装nmap</li></ul><pre><code>yum install -y nmap
</code></pre><p>扫描指定 IP 的端口，查看<code>nmap</code>生成的报告</p><pre><code>nmap 10.0.0.31
</code></pre><p>这里可以看到启用的端口有22、80、111。</p><pre><code>Nmap scan report for compute9999 (10.0.0.31)
Host is up (0.00016s latency).
Not shown: 997 closed ports
PORT    STATE SERVICE
22/tcp  open  ssh
80/tcp  open  http
111/tcp open  rpcbind
MAC Address: 00:0C:29:16:DF:E7 (VMware)

Nmap done: 1 IP address (1 host up) scanned in 0.16 seconds
</code></pre><h3 id=卸载软件>卸载软件</h3><pre><code>yum remove 软件名称
</code></pre><h3 id=查看服务日志>查看服务日志</h3><ul><li>服务的日志通常都在<code>/var/log</code>下，可以使用<code>tail</code>命令进行查询。例如我们需要查看 控制节点 nova 的日志：</li></ul><pre><code>cd /var/log/nova
tail -100 nova-api.log
</code></pre><h3 id=publicurl-endpoint-for-compute-service-not-found>publicURL endpoint for compute service not found</h3><ul><li>运行一下命令，查看是否有Nova 服务（Type=Compute）。</li></ul><pre><code>openstack service list
</code></pre><ul><li>如果没有，运行 <a href=/openstack-exp5>云计算部署实战Part5 - 安装 nova 计算服务</a> 控制节点实验步骤第4步。</li></ul><h3 id=查看系统所有相关服务状态>查看系统所有相关服务状态</h3><ul><li>例如查看包含nova关键字的服务</li></ul><pre><code>systemctl -a|grep nova
</code></pre><h3 id=查看系统某项服务状态>查看系统某项服务状态</h3><pre><code>systemctl status 服务名称 -l
</code></pre><h3 id=系统服务状态解释>系统服务状态解释</h3><ul><li>当我们使用<code>systemctl status 服务名称</code>查看某项服务的状态时，以下是相关服务状态解释：</li></ul><pre><code>active 表示服务正常运行。
activing 很有可能是卡在启动阶段。
failed 则表示服务启动失败。
inactive 表示没有启动。
</code></pre><p><img src=/static/img/openstack-summary/Snipaste_2021-03-24_10-18-07.png alt></p><h3 id=openstack-查看信息相关命令>Openstack 查看信息相关命令</h3><pre><code>#查看 openstack service
openstack service list

#查看 openstack endpoint
openstack endpoint list

#查看 openstack 实例
openstack server list

#查看 openstack 用户
openstack user list

#删除 openstack service
openstack service delete 替换为ID
</code></pre><h3 id=修改系统时间>修改系统时间</h3><ul><li>修改日期为 2021年3月11日</li></ul><pre><code>date -s  2021/03/11
</code></pre><ul><li>修改时间为 10:38:29</li></ul><pre><code>date -s  10:38:29
</code></pre><ul><li>写入CMOS</li></ul><pre><code>clock -w
</code></pre><h3 id=mysqlmariadb-常用命令>MySQL/MariaDB 常用命令</h3><pre><code>#MySQL 使用root用户登录
mysql -u root -p

#进入 nova 数据库
use nova;

#查看所有库
show databases;

#查看库里面所有的表名
show tables;

#删除nova库
drop database nova;
</code></pre><h2 id=常见错误解决办法>常见错误解决办法</h2><h3 id=1-登录-dashboardhorizon-web界面提示身份验证令牌已经过期>1. 登录 Dashboard(Horizon) Web界面提示身份验证令牌已经过期</h3><p>请使用 <code>date -s</code> 命令校准控制节点和计算节点的时间。或者参考<a href=/openstack-exp1/>Part1</a>步骤55，通过宿主机同步时间来进行校准。</p><h3 id=2-登录-dashboardhorizon-提示无法连接-keystone>2. 登录 Dashboard(Horizon) 提示无法连接 Keystone</h3><p>请检查计算节点下 /var/log/httpd/error_log 查看具体信息进行诊断。可能原因有：</p><ol><li>计算节点访问不了控制节点的 Keystone Endpoint（端口5000和35357）</li><li>控制节点关于 Keystone 的 service 或 endpoint 配置重复或错误。</li></ol></div><button id=scroll-top-btn>↑顶部</button>
<button id=switch-theme-btn>换主题</button><div id=outerdiv style=position:fixed;top:0;left:0;background:rgba(0,0,0,.7);z-index:2;width:100%;height:100%;display:none><div id=innerdiv style=position:absolute><img id=bigimg style="border:5px solid #fff" src></div></div><div id=category style=display:none;position:fixed;right:10px;bottom:10px;width:10em></div><script src=https://huangzhiyi.github.io/js/highlight.pack.js></script><script src=https://huangzhiyi.github.io/js/highlightjs-line-numbers.min.js></script><script>hljs.initHighlightingOnLoad();hljs.initLineNumbersOnLoad();$(function(){let curTheme=getCookie("theme");if(curTheme===""){setTheme("dark");}else{setTheme(curTheme);}
$('div.tbl-start').nextUntil('div.tbl-end','table').addClass('tbl');$("img").click(function(){var _this=$(this);imgShow("#outerdiv","#innerdiv","#bigimg",_this);});$("#scroll-top-btn").click(function(){document.body.scrollTop=document.documentElement.scrollTop=0;});$("#switch-theme-btn").click(function(){switchTheme();})});</script><script src=https://huangzhiyi.github.io/js/clipboard.min.js?></script><script src=https://huangzhiyi.github.io/js/codecopy.bundle.js?953></script></main><script src=https://huangzhiyi.github.io/js/heis-custom-min.js?878></script></body></html>