<!doctype html><html lang=zh><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Part 3 - 安装 Keystone 认证服务 | 云计算部署实战 | Heis</title><meta name=generator content="Hugo Eureka 0.8.4"><link rel=stylesheet href=/css/eureka.min.css><script defer src=/js/eureka.min.js></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap" as=style onload="this.onload=null;this.rel='stylesheet'"><script src=/static/js/jquery-3.6.0.min.js></script><script src=/static/js/heis.js></script><link rel=stylesheet href=/static/css/heis.css media=print onload="this.media='all';this.onload=null" crossorigin><link rel=stylesheet href=/static/css/highlight-css/solarized-light.min.css media=print onload="this.media='all';this.onload=null" crossorigin><script defer src=/static/js/highlight.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/js/all.min.js integrity="sha256-uNYoXefWRqv+PsIF/OflNmwtKM4lStn9yrz2gVl6ymo=" crossorigin></script><script defer src=/static/js/highlightjs-line-numbers.min.js></script><link rel=icon type=image/png sizes=32x32 href=/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_32x32_fill_box_center_2.png><link rel=apple-touch-icon sizes=180x180 href=/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_180x180_fill_box_center_2.png><meta name=description content="安装 Keystone 认证服务"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"课程文档","item":"/docs/"},{"@type":"ListItem","position":2,"name":"云计算部署实战","item":"/docs/openstack-exp/"},{"@type":"ListItem","position":3,"name":"Part 3 - 安装 Keystone 认证服务","item":"/docs/openstack-exp/openstack-exp3/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"/docs/openstack-exp/openstack-exp3/"},"headline":"Part 3 - 安装 Keystone 认证服务 | 云计算部署实战 | Heis","datePublished":"2021-03-01T16:42:51+08:00","dateModified":"2021-03-01T16:42:51+08:00","wordCount":2261,"author":{"@type":"Person","name":"heis"},"publisher":{"@type":"Person","name":"C. Wang","logo":{"@type":"ImageObject","url":"/images/icon.png"}},"description":"安装 Keystone 认证服务"}</script><meta property="og:title" content="Part 3 - 安装 Keystone 认证服务 | 云计算部署实战 | Heis"><meta property="og:type" content="article"><meta property="og:image" content="/images/icon.png"><meta property="og:url" content="/docs/openstack-exp/openstack-exp3/"><meta property="og:description" content="安装 Keystone 认证服务"><meta property="og:locale" content="zh"><meta property="og:site_name" content="Heis"><meta property="article:published_time" content="2021-03-01T16:42:51+08:00"><meta property="article:modified_time" content="2021-03-01T16:42:51+08:00"><meta property="article:section" content="docs"><meta property="article:tag" content="openstack"><meta property="article:tag" content="部署"><meta property="og:see_also" content="/docs/openstack-exp/openstack-exp2/"><meta property="og:see_also" content="/docs/openstack-exp/openstack-exp1/"><script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?f58b6a2675cf52000232edb4d109eccc";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script><body class="flex flex-col min-h-screen"><header class="fixed flex items-center w-full min-h-16 pl-scrollbar z-50 bg-secondary-bg shadow-sm"><div class="w-full max-w-screen-xl mx-auto"><script>let storageColorScheme=localStorage.getItem("lightDarkMode")
if(((storageColorScheme=='Auto'||storageColorScheme==null)&&window.matchMedia("(prefers-color-scheme: dark)").matches)||storageColorScheme=="Dark"){document.getElementsByTagName('html')[0].classList.add('dark')}</script><nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0"><a href=/ class="mr-6 text-primary-text text-xl font-bold">Heis</a>
<button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
<i class="fas fa-bars"></i></button><div id=target class="hidden block md:flex md:flex-grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20"><div class="md:flex md:h-16 text-sm md:flex-grow pb-4 md:pb-0 border-b md:border-b-0"><a href=/posts/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">文章</a>
<a href=/docs/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 selected-menu-item mr-4">课程文档</a></div><div class=flex><div class="relative pt-4 md:pt-0"><div class="cursor-pointer hover:text-eureka" id=lightDarkMode><i class="fas fa-adjust"></i></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id=is-open></div><div class="absolute flex flex-col left-0 md:left-auto right-auto md:right-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40" id=lightDarkOptions><span class="px-4 py-1 hover:text-eureka" name=Light>浅色</span>
<span class="px-4 py-1 hover:text-eureka" name=Dark>深色</span>
<span class="px-4 py-1 hover:text-eureka" name=Auto>自动</span></div></div></div></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id=is-open-mobile></div></nav><script>let element=document.getElementById('lightDarkMode')
if(storageColorScheme==null||storageColorScheme=='Auto'){document.addEventListener('DOMContentLoaded',()=>{window.matchMedia("(prefers-color-scheme: dark)").addEventListener('change',switchDarkMode)})}else if(storageColorScheme=="Light"){element.firstElementChild.classList.remove('fa-adjust')
element.firstElementChild.setAttribute("data-icon",'sun')
element.firstElementChild.classList.add('fa-sun')}else if(storageColorScheme=="Dark"){element.firstElementChild.classList.remove('fa-adjust')
element.firstElementChild.setAttribute("data-icon",'moon')
element.firstElementChild.classList.add('fa-moon')}
document.addEventListener('DOMContentLoaded',()=>{getcolorscheme();switchBurger();});</script></div></header><main class="flex-grow pt-16"><div class=pl-scrollbar><div class="w-full max-w-screen-xl lg:px-4 xl:px-8 mx-auto"><div class=lg:pt-12><div class="flex flex-col md:flex-row bg-secondary-bg rounded"><div class="md:w-1/4 lg:w-1/5 border-r"><div class="sticky top-16 pt-6"><div id=sidebar-title class="md:hidden mx-4 px-2 pt-4 pb-2 md:border-b text-tertiary-text md:text-primary-text"><span class=font-semibold>目录</span>
<i class="fas fa-caret-right ml-1"></i></div><div id=sidebar-toc class="hidden md:block overflow-y-auto mx-6 md:mx-0 pr-6 pt-2 md:max-h-doc-sidebar bg-primary-bg md:bg-transparent"><div class="flex flex-wrap ml-4 -mr-2 p-2 bg-secondary-bg md:bg-primary-bg rounded"><a class=hover:text-eureka href=/docs/openstack-exp/>云计算部署实战</a></div><ul class=pl-6><li class=py-2><div><a class=hover:text-eureka href=/docs/openstack-exp/openstack-exp1/>Part 1 - 制作 CentOS 模板镜像</a></div></li><li class=py-2><div><a class=hover:text-eureka href=/docs/openstack-exp/openstack-exp2/>Part 2 - 配置计算节点和控制节点</a></div></li><li class=py-2><div><a class="text-eureka hover:text-eureka" href=/docs/openstack-exp/openstack-exp3/>Part 3 - 安装 Keystone 认证服务</a></div></li><li class=py-2><div><a class=hover:text-eureka href=/docs/openstack-exp/openstack-exp4/>Part 4 - 安装 Glance 镜像服务</a></div></li><li class=py-2><div><a class=hover:text-eureka href=/docs/openstack-exp/openstack-exp5/>Part 5 - 安装 nova 计算服务</a></div></li><li class=py-2><div><a class=hover:text-eureka href=/docs/openstack-exp/openstack-exp6/>Part 6 - 安装 Neutron 网络服务</a></div></li><li class=py-2><div><a class=hover:text-eureka href=/docs/openstack-exp/openstack-exp7/>Part 7 - 安装 Dashboard(Horizon)</a></div></li><li class=py-2><div><a class=hover:text-eureka href=/docs/openstack-exp/openstack-exp8/>Part 8 - 启动一个镜像实例</a></div></li><li class=py-2><div><a class=hover:text-eureka href=/docs/openstack-exp/openstack-exp9/>Part9 - 增加一个计算节点</a></div></li></ul></div></div></div><div class="w-full md:w-3/4 lg:w-4/5 pb-8 pt-2 md:pt-8"><div class="w-full lg:w-3/4 pl-6 ml-0 mr-auto"><h1 class="font-bold text-3xl text-primary-text">Part 3 - 安装 Keystone 认证服务</h1><div class="flex flex-wrap flex-row items-center mt-2 text-tertiary-text"><div class="mr-6 my-2"><i class="fas fa-calendar mr-1"></i><span>2021-03-01</span></div><div class="mr-6 my-2"><i class="fas fa-clock mr-1"></i><span>5分钟阅读时长</span></div><div class="mr-6 my-2"><i class="fas fa-folder mr-1"></i><a href=/categories/openstack/ class=hover:text-eureka>openstack</a></div></div></div><div class=flex><div class="w-full lg:w-3/4 px-6"><div class=content><h2 id=版本>【版本】</h2><p>当前版本号<code>v20210324</code></p><div class=tbl-start></div><table><thead><tr><th>版本</th><th>修改说明</th></tr></thead><tbody><tr><td>v20210324</td><td>加入验证步骤</td></tr><tr><td>v20210316</td><td>步骤23去掉了容易导致出错的&lt;></td></tr><tr><td>v20210309</td><td>新增验证命令</td></tr><tr><td>v20210303</td><td>祛除了配置文件MD5校验的步骤</td></tr><tr><td>v20210301</td><td>初始化版本</td></tr></tbody></table><div class=tbl-end style=height:10px></div><h2 id=实验名称>【实验名称】</h2><p>云计算部署实战 Part 3 - 安装 Keystone 认证服务</p><h3 id=实验目的>【实验目的】</h3><ul><li>掌握搭建计算节点软件和环境</li><li>熟练掌握Linux命令（vi、tar、mv等等）的使用</li><li>掌握VMWare、XShell等客户端的使用</li></ul><h3 id=实验环境>【实验环境】</h3><ul><li>内存：至少4G</li><li>硬盘：至少空余40G</li><li>操作系统: 64位 Windows系统。</li></ul><h3 id=实验资源>【实验资源】</h3><ul><li>XShell</li><li>CentOS 7.4系统镜像</li><li>VMWare WorkStation Pro</li><li>Openstack源</li></ul><h3 id=实验步骤>【实验步骤】</h3><ol><li>使用Root用户登录控制节点（Controller）。输出 Hostname ，确认所在节点是控制节点。</li></ol><pre><code>hostname
</code></pre><p>结果:</p><pre><code>controller+你的学号后4位
</code></pre><ol start=2><li>连接 Mariadb，进入数据库命令行，输入密码<code>123456</code>。</li></ol><pre><code>mysql -u root -p
</code></pre><ol start=3><li>【数据库命令行】创建一个名为<code>keystone</code>的库。</li></ol><pre><code>CREATE DATABASE keystone;
</code></pre><ol start=4><li>【数据库命令行】创建名为 keystone，密码为<code>KEYSTONE_DBPASS</code> 的数据库用户，并授权访问 keystone 库。</li></ol><pre><code>GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'localhost' \
  IDENTIFIED BY 'KEYSTONE_DBPASS';
GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'%' \
  IDENTIFIED BY 'KEYSTONE_DBPASS';
</code></pre><ol start=5><li>查看<code>keystone</code>库，此时库中没有任何表（Table）。</li></ol><pre><code>use keystone;
show tables;
</code></pre><ol start=6><li>【数据库命令行】输入 <code>exit;</code> 退出数据库命令行。</li></ol><pre><code>exit;
</code></pre><ol start=7><li>安装keystone相关软件包。</li></ol><pre><code>yum install openstack-keystone httpd mod_wsgi -y
</code></pre><ol start=8><li>备份 Keystone 的配置文件keystone.conf 为 keystone.conf.bak。</li></ol><pre><code>cp /etc/keystone/keystone.conf{,.bak}
</code></pre><ol start=9><li>清除 Keystone 配置文件的注释</li></ol><pre><code>grep -Ev '^$|#' /etc/keystone/keystone.conf.bak &gt;/etc/keystone/keystone.conf
</code></pre><ol start=10><li>安装<code>openstack-utils</code></li></ol><pre><code>yum install openstack-utils -y
</code></pre><ol start=11><li>配置 Keystone 的admin_token，数据库连接，token provider。注意替换你的学号。</li></ol><pre><code>openstack-config --set /etc/keystone/keystone.conf DEFAULT admin_token  ADMIN_TOKEN
openstack-config --set /etc/keystone/keystone.conf database connection  mysql+pymysql://keystone:KEYSTONE_DBPASS@controller+你学号后4位/keystone
openstack-config --set /etc/keystone/keystone.conf token provider  fernet
</code></pre><ol start=12><li>执行同步数据库</li></ol><pre><code>cd /etc/keystone/
su -s /bin/sh -c &quot;keystone-manage db_sync&quot; keystone
</code></pre><ol start=13><li><p>此时再次连接 MariaDB，查询 keystone 库中是否有表。参考步骤2、5、6。</p></li><li><p>初始化 fernet。</p></li></ol><pre><code>cd /etc/keystone/
keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone
</code></pre><ol start=15><li>追加 Apache (httpd)的配置，注意替换你的学号。这里主要是增加ServerName的配置。</li></ol><pre><code>echo &quot;ServerName controller+你学号后4位&quot; &gt;&gt;/etc/httpd/conf/httpd.conf
</code></pre><ol start=16><li>增加一个Apache的虚拟主机（VirtualHost）配置，keystone-public运行在5000端口，keystone-admin运行在35357端口。</li></ol><pre><code>vi /etc/httpd/conf.d/wsgi-keystone.conf
</code></pre><pre><code>Listen 5000
Listen 35357
&lt;VirtualHost *:5000&gt;
    WSGIDaemonProcess keystone-public processes=5 threads=1 user=keystone group=keystone display-name=%{GROUP}
    WSGIProcessGroup keystone-public
    WSGIScriptAlias / /usr/bin/keystone-wsgi-public
    WSGIApplicationGroup %{GLOBAL}
    WSGIPassAuthorization On
    ErrorLogFormat &quot;%{cu}t %M&quot;
    ErrorLog /var/log/httpd/keystone-error.log
    CustomLog /var/log/httpd/keystone-access.log combined

    &lt;Directory /usr/bin&gt;
        Require all granted
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;

&lt;VirtualHost *:35357&gt;
    WSGIDaemonProcess keystone-admin processes=5 threads=1 user=keystone group=keystone display-name=%{GROUP}
    WSGIProcessGroup keystone-admin
    WSGIScriptAlias / /usr/bin/keystone-wsgi-admin
    WSGIApplicationGroup %{GLOBAL}
    WSGIPassAuthorization On
    ErrorLogFormat &quot;%{cu}t %M&quot;
    ErrorLog /var/log/httpd/keystone-error.log
    CustomLog /var/log/httpd/keystone-access.log combined

    &lt;Directory /usr/bin&gt;
        Require all granted
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre><ol start=17><li>启动Apache（httpd），并设置为开机启动。</li></ol><pre><code>systemctl enable httpd.service
systemctl start httpd.service
</code></pre><ol start=18><li>设置 Keystone 的相关环境变量。注意替换为你的学号。</li></ol><pre><code>export OS_TOKEN=ADMIN_TOKEN
export OS_URL=http://controller+你的学号:35357/v3
export OS_IDENTITY_API_VERSION=3
</code></pre><ol start=19><li>创建1个 Keystone 的服务。命令正常创建会展示以下类似代码。</li></ol><pre><code>openstack service create --name keystone --description &quot;OpenStack Identity&quot; identity
</code></pre><pre><code>+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Identity               |
| enabled     | True                             |
| id          | 27c6ff83af90458dabf2fc19ab02efda |
| name        | keystone                         |
| type        | identity                         |
+-------------+----------------------------------+
</code></pre><ol start=20><li>创建3个端点（endpoint）。注意替换为你的学号。每行命令正常创建会展示以下类似代码。</li></ol><pre><code>openstack endpoint create --region RegionOne \
  identity public http://controller+你的学号:5000/v3
openstack endpoint create --region RegionOne \
  identity internal http://controller+你的学号:5000/v3
openstack endpoint create --region RegionOne \
  identity admin http://controller+你的学号:35357/v3
</code></pre><pre><code>+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 3b4738ec31644bdb90bf8f8515eac596 |
| interface    | internal                         |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 27c6ff83af90458dabf2fc19ab02efda |
| service_name | keystone                         |
| service_type | identity                         |
| url          | http://controller+你的学号:5000/v3    |
+--------------+----------------------------------+
</code></pre><ol start=21><li>运行以下命令分别创建域<code>default</code>、项目<code>admin</code>、用户<code>admin</code>、角色<code>admin</code>。</li></ol><pre><code>openstack domain create --description &quot;Default Domain&quot; default

openstack project create --domain default --description &quot;Admin Project&quot; admin

openstack user create --domain default --password ADMIN_PASS admin

openstack role create admin
</code></pre><ol start=22><li>查询刚创建的用户的ID</li></ol><pre><code>openstack user list
</code></pre><ol start=23><li>复制上文的ID，关联项目<code>admin</code>，用户<code>admin</code>，角色<code>admin</code>。</li></ol><pre><code>openstack role add --project admin --user 替换为用户ID admin
</code></pre><h3 id=控制节点验证步骤>【控制节点验证步骤】</h3><ol><li>移除上面步骤19设置的环境变量。</li></ol><pre><code>unset OS_TOKEN
unset OS_URL
unset OS_IDENTITY_API_VERSION
</code></pre><ol start=2><li>创建一个设置环境变量的脚本，输入以下内容，注意替换为你的学号。这个环境变量脚本主要方便我们预设一些全局设置，用来测试 keystone 能否正常运行。</li></ol><pre><code>vim /etc/keystone/admin-openrc
</code></pre><pre><code>export OS_PROJECT_DOMAIN_NAME=default
export OS_USER_DOMAIN_NAME=default
export OS_PROJECT_NAME=admin
export OS_USERNAME=admin
export OS_PASSWORD=ADMIN_PASS
export OS_AUTH_URL=http://controller+你的学号后4位:35357/v3
export OS_IDENTITY_API_VERSION=3
export OS_IMAGE_API_VERSION=2
</code></pre><ol start=3><li>执行脚本，设置环境变量。</li></ol><pre><code>source /etc/keystone/admin-openrc
</code></pre><ol start=4><li>查看token，可以多运行几次，查看 token id 是否更新。</li></ol><pre><code>openstack token issue
</code></pre><p>类似结果：</p><pre><code>+------------+-------------------------------------------------+
| Field      | Value                                           |
+------------+-------------------------------------------------+
| expires    | 2021-03-24T08:27:30.000000Z                     |
| id         | gAAAAABgWunifA_DeD3mcJMerIIFLqXy7tajYuAmAVvM1pM |
|            | 9yTeRaM5gXVDImlqbrivC1IwtpxtJR2Gq6EHMJ1iSZ10iRa |
|            | dJzqZWYjoWLha-bSlbqb3y0Iyzo-                    |
|            | liAC02tVsiv6ZPge4KXndvwxTk79_dkw--              |
|            | zvXUlKmM5SY68n2eQZttddTcPSQ                     |
| project_id | 70667e2a19c640b796c9e2de6571a33c                |
| user_id    | 5b74a6845f264ae9912b78d4a32f5f73                |
+------------+-------------------------------------------------+
</code></pre><ol start=5><li>清除环境变量，使用 openstack 命令验证是否能够获取 Token。注意替换学号。</li></ol><pre><code>unset OS_PROJECT_DOMAIN_NAME
unset OS_USER_DOMAIN_NAME
unset OS_PROJECT_NAME
unset OS_USERNAME
unset OS_PASSWORD
unset OS_AUTH_URL
unset OS_IDENTITY_API_VERSION
unset OS_IMAGE_API_VERSION

openstack --os-auth-url http://controller+你的学号后4位:5000/v3 \
  --os-project-domain-name default --os-user-domain-name default \
  --os-project-name admin --os-username admin --os-auth-type password \
  --os-password ADMIN_PASS token issue
</code></pre><p>类似结果：</p><pre><code>+------------+-------------------------------------------------+
| Field      | Value                                           |
+------------+-------------------------------------------------+
| expires    | 2021-03-24T08:27:30.000000Z                     |
| id         | gAAAAABgWunifA_DeD3mcJMerIIFLqXy7tajYuAmAVvM1pM |
|            | 9yTeRaM5gXVDImlqbrivC1IwtpxtJR2Gq6EHMJ1iSZ10iRa |
|            | dJzqZWYjoWLha-bSlbqb3y0Iyzo-                    |
|            | liAC02tVsiv6ZPge4KXndvwxTk79_dkw--              |
|            | zvXUlKmM5SY68n2eQZttddTcPSQ                     |
| project_id | 70667e2a19c640b796c9e2de6571a33c                |
| user_id    | 5b74a6845f264ae9912b78d4a32f5f73                |
+------------+-------------------------------------------------+
</code></pre><ol start=6><li>查询 keystone identity service，表里应该只有一行记录。</li></ol><pre><code>source /etc/keystone/admin-openrc
openstack service list |grep -E &quot;ID|keystone&quot;
</code></pre><p>类似结果：</p><pre><code>| ID                               | Name     | Type     |
| 27c6ff83af90458dabf2fc19ab02efda | keystone | identity |
</code></pre><ol start=7><li>查询 keystone endpoint，表里应该有3行记录。</li></ol><pre><code>source /etc/keystone/admin-openrc
openstack endpoint list |grep -E &quot;ID|keystone&quot;
</code></pre><p>类似结果：</p><pre><code>| ID                               | Region    | Service Name | Service Type | Enabled | Interface | URL                                           |
| 3b4738ec31644bdb90bf8f8515eac596 | RegionOne | keystone     | identity     | True    | internal  | http://controller9999:5000/v3                 |
| 82fae374b1b34d08bf70c9e13695b03e | RegionOne | keystone     | identity     | True    | public    | http://controller9999:5000/v3                 |
| c471090d01e9471cbd2afd57fe71e7fb | RegionOne | keystone     | identity     | True    | admin     | http://controller9999:35357/v3
</code></pre><ol start=8><li>在<code>控制节点</code>上查看以下服务是否是 active 的状态。正常应该出现5个服务 active。</li></ol><pre><code>systemctl -a |grep -E &quot;UNIT|chronyd|memcached|rabbitmq|mariadb|httpd&quot;
</code></pre><h3 id=思考和探索>【思考和探索】</h3><ol><li>关于用户，角色，权限的关系，你是如何理解的？</li><li>现在需要创建一个符合如下要求的域、项目、用户、角色，并且能够成功获取到token，你能够完成命令的编写并实现这个要求吗？</li></ol><pre><code>domain=default
project=roomaccess
user=stu+你学号后4位
role=student
</code></pre></div><div class=my-4><a href=/tags/openstack/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#openstack</a>
<a href=/tags/%E9%83%A8%E7%BD%B2/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#部署</a></div><div class=py-2><div class="flex flex-col md:flex-row items-center my-8"><a href=/authors/heis/ class="w-24 h-24 md:mr-4"><img src=/static/img/authors/heis.png class="w-full bg-primary-bg rounded-full" alt=Avatar></a><div class="w-full md:w-auto mt-4 md:mt-0"><a href=/authors/heis/ class="block font-bold text-lg pb-1 mb-2 border-b">黄老师</a>
<span class="block pb-2"></span><a href=mailto:heishuangzy@qq.com class=mr-1><i class="fas fa-envelope"></i></a><a href=https://gitee.com/heis/ class=mr-1><i class="fab fa-git"></i></a></div></div></div><div class="flex flex-col md:flex-row md:justify-between -mx-2 mt-4 px-2 pt-4 border-t"><div><span class="block font-bold">上一页</span>
<a href=/docs/openstack-exp/openstack-exp2/ class=block>Part 2 - 配置计算节点和控制节点</a></div><div class="md:text-right mt-4 md:mt-0"><span class="block font-bold">下一页</span>
<a href=/docs/openstack-exp/openstack-exp4/ class=block>Part 4 - 安装 Glance 镜像服务</a></div></div></div><div class="hidden lg:block lg:w-1/4"><div class="sticky top-16 z-10 hidden lg:block px-6 py-4 bg-secondary-bg pt-16 -mt-16"><span class="text-lg font-semibold">本页内容</span></div><div class="sticky-toc hidden lg:block px-6 pb-6 pt-10 -mt-10 border-l"><nav id=TableOfContents><ul><li><a href=#版本>【版本】</a></li><li><a href=#实验名称>【实验名称】</a><ul><li><a href=#实验目的>【实验目的】</a></li><li><a href=#实验环境>【实验环境】</a></li><li><a href=#实验资源>【实验资源】</a></li><li><a href=#实验步骤>【实验步骤】</a></li><li><a href=#控制节点验证步骤>【控制节点验证步骤】</a></li><li><a href=#思考和探索>【思考和探索】</a></li></ul></li></ul></nav></div><script>window.addEventListener('DOMContentLoaded',()=>{enableStickyToc();});</script></div></div></div></div></div><div id=outerdiv><div id=innerdiv><img id=bigimg src></div></div><script>document.addEventListener('DOMContentLoaded',()=>{hljs.highlightAll();hljs.initLineNumbersOnLoad({singleLine:true});changeSidebarHeight();switchDocToc();$("img").css("cursor:pointer")
$("img").click(function(){var _this=$(this);imgShow("#outerdiv","#innerdiv","#bigimg",_this);});})</script><script src=/static/js/clipboard.min.js></script><script src=/static/js/codecopy.bundle.js?158></script></div></div></main><footer class=pl-scrollbar><div class="w-full max-w-screen-xl mx-auto"><div class="text-center p-6 pin-b"><p class="text-sm text-tertiary-text">&copy; 2021 <a href=https://www.wangchucheng.com/>C. Wang</a> and <a href=https://www.ruiqima.com/>R. Ma</a>
&#183; Powered by the <a href=https://github.com/wangchucheng/hugo-eureka class=hover:text-eureka>Eureka</a> theme for <a href=https://gohugo.io class=hover:text-eureka>Hugo</a></p></div></div></footer></body></html>