<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=zh-CN lang=zh-cn><head><link href=//gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.80.0"><meta name=viewport content="width=device-width,initial-scale=1"><title>物联网云平台设计与开发实训 Part 2 - Dependency Injection 依赖注入 &#183; Heis</title><link type=text/css rel=stylesheet href=https://huangzhiyi.github.io/css/heis-min.css?858><link type=text/css id=dark_theme_css rel=stylesheet href=https://huangzhiyi.github.io/css/a11y-dark.css title=dark><link type=text/css id=light_theme_css rel="alternate stylesheet" href=https://huangzhiyi.github.io/css/a11y-light.css title=light><script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?f58b6a2675cf52000232edb4d109eccc";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed2.png><link rel="shortcut icon" href=/favicon2.png><script src=https://huangzhiyi.github.io/js/jquery-min.js></script></head><body><aside class=sidebar id=bsidebar><button id=hide-sb-btn onclick=hideSidebar()></button><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://huangzhiyi.github.io/><h1 id=side-title>Heis</h1></a><p class=lead>Long live MAMBA</p><p class=ac><a href=https://support.qq.com/products/332688 class=tooltip target=_blank><img class=tooltiptext src=https://huangzhiyi.github.io/feedback.png?20210617>
提点意见和建议»</a></p></div><nav><ul class=sidebar-nav><li><a href=https://huangzhiyi.github.io/>首页</a></li><li><a href=https://huangzhiyi.github.io/categories/javaweb/>Java后台应用项目开发»</a></li><li><a href=https://huangzhiyi.github.io/categories/clouddc/>云数据中心基础»</a></li><li><a href=https://huangzhiyi.github.io/categories/webtraining/>Web企业级项目实战»</a></li><li><a href=https://huangzhiyi.github.io/categories>文章分类»</a></li><li><a href=https://huangzhiyi.github.io/tags>文章标签»</a></li><li><a href=https://heis.gitee.io/ target=_blank>镜像0：heis.gitee.io</a></li><li><a href=http://heisun.xyz/ target=_blank>镜像1：heisun.xyz</a></li><li><a href=https://huangzhiyi.github.io/ target=_blank>镜像2：huangzhiyi.github.io</a></li></ul></nav><p>&copy; 2021. All rights reserved.</p><p></p></div></aside><main class="content container" id=mainpanel><button id=show-sb-btn onclick=showSidebar()></button><div class=post><h1>物联网云平台设计与开发实训 Part 2 - Dependency Injection 依赖注入</h1><time datetime=2021-05-09T21:40:00+0800 class=post-date>2021-05-09</time><blockquote><h2>文章导航</h2><aside><nav id=TableOfContents><ul><li><a href=#物联网云平台设计与开发实训-part-2----dependency-injection-依赖注入>物联网云平台设计与开发实训 Part 2 - Dependency Injection 依赖注入</a><ul><li><a href=#版本>【版本】</a></li></ul></li><li><a href=#实训-21-新建-maven-项目>实训 2.1 新建 Maven 项目</a><ul><li><a href=#实验名称>【实验名称】</a></li><li><a href=#实验目的>【实验目的】</a></li><li><a href=#实验环境>【实验环境】</a></li><li><a href=#实验资源>【实验资源】</a></li><li><a href=#实验步骤>【实验步骤】</a></li></ul></li><li><a href=#实训-22-依赖注入项目实例>实训 2.2 依赖注入项目实例</a><ul><li><a href=#实验名称-1>【实验名称】</a></li><li><a href=#实验目的-1>【实验目的】</a></li><li><a href=#实验环境-1>【实验环境】</a></li><li><a href=#实验资源-1>【实验资源】</a></li><li><a href=#实验步骤-1>【实验步骤】</a></li></ul></li><li><a href=#实训-23-spring-依赖注入项目实例>实训 2.3 Spring 依赖注入项目实例</a><ul><li><a href=#实验名称-2>【实验名称】</a></li><li><a href=#实验目的-2>【实验目的】</a></li><li><a href=#实验环境-2>【实验环境】</a></li><li><a href=#实验资源-2>【实验资源】</a></li><li><a href=#实验步骤-2>【实验步骤】</a></li></ul></li></ul></nav></aside></blockquote><p><a href=/iot-dev-summary/>«返回课程汇总页面</a></p><h2 id=物联网云平台设计与开发实训-part-2----dependency-injection-依赖注入>物联网云平台设计与开发实训 Part 2 - Dependency Injection 依赖注入</h2><h3 id=版本>【版本】</h3><p>当前版本号<code>v20210510</code></p><div class=tbl-start></div><table><thead><tr><th>版本</th><th>修改说明</th></tr></thead><tbody><tr><td>v20210510</td><td>初始化版本</td></tr></tbody></table><div class=tbl-end style=height:10px></div><h2 id=实训-21-新建-maven-项目>实训 2.1 新建 Maven 项目</h2><h3 id=实验名称>【实验名称】</h3><p>实训 2.1 新建 Maven 项目</p><h3 id=实验目的>【实验目的】</h3><ul><li>掌握新建 Maven 项目</li><li>掌握 Maven 包的管理</li></ul><h3 id=实验环境>【实验环境】</h3><ul><li>Windows 7 以上64位操作系统</li></ul><h3 id=实验资源>【实验资源】</h3><ul><li><a href=https://www.oracle.com/java/technologies/javase-downloads.html target=_blank>JDK 8</a> - Java Development Kit是 Oracle 公司针对Java开发人员发布的免费软件开发工具包，是 Java 开发必备的开发工具。</li><li><a href=https://www.jetbrains.com/idea/ target=_blank>Intellij IDEA</a> - 业界简称IDEA，是 jetbrains 公司推出的和 Eclipse 齐名的 Java 集成开发环境（IDE）。</li><li><a href=https://maven.apache.org/ target=_blank>Apache Maven</a> - Apache Maven，是一个软件项目管理及自动构建工具，由Apache软件基金会所提供。是 Java 构建打包最广泛使用的工具。</li><li><a href=https://www.mysql.com/ target=_blank>MySQL</a> 世界上最受欢迎的开源关系数据库之一。</li><li><a href=https://www.heidisql.com target=_blank>HeidiSQL</a>，开源数据库客户端。</li><li><a href=https://cmder.net target=_blank>Cmder</a> 是一个美化的 Windows 命令行终端，支持 ctrl-V 粘贴。</li><li>Notepad++ 是一个开源文本编辑器，支持代码着色等多种功能，比 Windows 原生文本编辑器功能要丰富很多。</li><li><a href=https://flywaydb.org/ target=_blank>Flyway</a> 是一个管理数据库脚本迁移的工具。</li><li><a href=https://mosquitto.org/ target=_blank>Eclipse Mosquitto</a> 是一个开源的 MQTT 服务器。支持5.0、3.1.1和3.1的MQTT协议。</li><li><a href=https://mqttfx.jensd.de/ target=_blank>MQTT.fx</a> 是一个基于 JavaFX 的 MQTT 客户端.</li></ul><pre><code>下载链接：https://pan.baidu.com/s/1UGHLQpBDiyICSerpv3fkAA
提取码：heis
</code></pre><pre><code>下载链接：https://pan.baidu.com/s/1UGHLQpBDiyICSerpv3fkAA
提取码：heis
</code></pre><h3 id=实验步骤>【实验步骤】</h3><ol><li><p>下载 repos1.zip 离线 Maven 仓库包。并解压到 <code>Maven 安装目录/repos</code>目录下。</p></li><li><p>启动IDEA，运行<code>d:\idea\intellij-idea-community-portable.exe</code>。新建一个项目。
<img src=/static/img/iot-dev-02/Snipaste_2021-03-31_15-46-09.png alt></p></li><li><p>新建一个 Maven 项目，<code>Project SDK</code>选择 1.8，如果没有，则点击<code>Add JDK...</code>，指向你的 JDK 的安装目录。
<img src=/static/img/iot-dev-02/Snipaste_2021-03-31_15-46-53.png alt>
<img src=/static/img/iot-dev-02/Snipaste_2021-03-31_15-47-31.png alt>
<img src=/static/img/iot-dev-02/Snipaste_2021-03-31_15-47-55.png alt></p></li><li><p>项目名称为<code>Emoji</code>，选择一个非C盘的地方进行保存。注意替换为你的学号后4位。</p></li></ol><pre><code>GroupId 设置为 emoji你的学号后4位
ArtifactId 设置为 Emoji
Version 设置为 1.0-SNAPSHOT
</code></pre><p><img src=/static/img/iot-dev-02/Snipaste_2021-05-11_00-04-47.png alt></p><ol start=5><li><p>修改 IDEA 的 Maven 配置，指向本地安装的 Maven。这里注意替换为你的 Maven 的实际安装目录。
<img src=/static/img/iot-dev-02/Snipaste_2021-04-01_08-03-49.png alt>
<img src=/static/img/iot-dev-02/Snipaste_2021-04-01_08-06-39.png alt></p></li><li><p>修改项目默认文件编码为<code>UTF-8</code>
<img src=/static/img/iot-dev-02/Snipaste_2021-05-11_00-18-02.png alt></p></li><li><p>修改项目<code>pom.xml</code>，加入 JUnit 包依赖。只需要修改<code>&lt;dependencies></code>标签内的内容。</p></li></ol><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project ...&gt;
 ...

    &lt;dependencies&gt;
	 &lt;!-- JUnit 包依赖配置--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
            &lt;version&gt;4.12&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
 ...
&lt;/project&gt;
</code></pre><ol start=8><li><p>观察是否能够正常引入包。
<img src=/static/img/hadoop-c04/Snipaste_2021-05-11_00-27-54.png alt></p></li><li><p>在<code>src/test/java</code> 目录下新建一个包，名称为<code>emoji你的学号后4位.test</code>。注意替换为你的学号后4位。
<img src=/static/img/hadoop-c04/Snipaste_2021-05-11_00-54-48.png alt></p></li><li><p>在刚才创建的包下面新建一个 JUnit 测试用例，类名为<code>TestMath</code>。</p></li></ol><pre><code>import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class TestMath {
    @Test
    public void testAdd(){
        assertEquals(2,1+1);
    }
}
</code></pre><ol start=11><li><p>运行 testAdd 方法进行测试，观察输出结果是否通过。</p></li><li><p>在原有测试用例新增 testMinus 方法测试<code>759382783-359843749</code> 的结果是否为<code>399539034</code>。</p></li></ol><h2 id=实训-22-依赖注入项目实例>实训 2.2 依赖注入项目实例</h2><h3 id=实验名称-1>【实验名称】</h3><p>实训 2.2 依赖注入项目实例</p><h3 id=实验目的-1>【实验目的】</h3><ul><li>了解依赖注入的优势和原理。</li></ul><h3 id=实验环境-1>【实验环境】</h3><ul><li>Windows 7 以上64位操作系统</li></ul><h3 id=实验资源-1>【实验资源】</h3><ul><li><a href=https://www.oracle.com/java/technologies/javase-downloads.html target=_blank>JDK 8</a> - Java Development Kit是 Oracle 公司针对Java开发人员发布的免费软件开发工具包，是 Java 开发必备的开发工具。</li><li><a href=https://www.jetbrains.com/idea/ target=_blank>Intellij IDEA</a> - 业界简称IDEA，是 jetbrains 公司推出的和 Eclipse 齐名的 Java 集成开发环境（IDE）。</li><li><a href=https://maven.apache.org/ target=_blank>Apache Maven</a> - Apache Maven，是一个软件项目管理及自动构建工具，由Apache软件基金会所提供。是 Java 构建打包最广泛使用的工具。</li><li>MySQL，世界上最受欢迎的开源关系数据库之一。</li><li>HeidiSQL，开源数据库客户端。</li><li>Cmder 是一个美化的 Windows 命令行终端，支持 ctrl-V 粘贴。</li><li>Notepad++ 是一个开源文本编辑器，支持代码着色等多种功能，比 Windows 原生文本编辑器功能要丰富很多。</li></ul><pre><code>下载链接：https://pan.baidu.com/s/1UGHLQpBDiyICSerpv3fkAA
提取码：heis
</code></pre><h3 id=实验步骤-1>【实验步骤】</h3><ol><li>实训2.1创建的项目，在 src/main/java 目录下创建包<code>emoji你的学号后4位</code>。</li><li>导入以下3个类到刚创建的包下面。</li></ol><pre><code>/**
 * 表情工厂
 */
public class EmojiFactory {
    public Emoji generate(String classname) {
        Emoji rs = null;
        try {
            rs = (Emoji) Class.forName(classname).newInstance();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        }
        return rs;
    }
}
</code></pre><pre><code>/**
 * 表情接口
 */
public interface Emoji {
    public String react();
}
</code></pre><pre><code>/**
 * 表情-微笑
 */
public class Smile implements Emoji {
    public String react(){
        return &quot;(*￣︶￣)&quot;;
    }
}
</code></pre><pre><code>public class Person2 {
    private Emoji emoji;
    public String make(){
        return emoji.react();
    }
    public void setEmoji(Emoji emoji) {
        this.emoji = emoji;
    }
}
</code></pre><ol start=3><li>编写一个新的表情 Sad(╭(╯^╰)╮)，并使用表情工厂实例化，设置到 Person2 的 emoji属性，然后调用Person2.make()进行输出。参考以下 Smile 表情的测试代码。</li></ol><pre><code>import emoji9999.Emoji;
import emoji9999.EmojiFactory;
import emoji9999.Person2;
import org.junit.Test;

public class Test3 {
    @Test
    public void testIoc(){
        Person2 p2=new Person2();
        EmojiFactory factory=new EmojiFactory();
        Emoji e=factory.generate(&quot;emoji9999.Smile&quot;);
        p2.setEmoji(e);
        System.out.println(p2.make());
    }
}
</code></pre><h2 id=实训-23-spring-依赖注入项目实例>实训 2.3 Spring 依赖注入项目实例</h2><h3 id=实验名称-2>【实验名称】</h3><p>实训 2.3 Spring 依赖注入项目实例</p><h3 id=实验目的-2>【实验目的】</h3><ul><li>了解 Spring 如何实现依赖注入</li><li>掌握如何编写 Spring 的依赖注入</li></ul><h3 id=实验环境-2>【实验环境】</h3><ul><li>Windows 7 以上64位操作系统</li></ul><h3 id=实验资源-2>【实验资源】</h3><ul><li><a href=https://www.oracle.com/java/technologies/javase-downloads.html target=_blank>JDK 8</a> - Java Development Kit是 Oracle 公司针对Java开发人员发布的免费软件开发工具包，是 Java 开发必备的开发工具。</li><li><a href=https://www.jetbrains.com/idea/ target=_blank>Intellij IDEA</a> - 业界简称IDEA，是 jetbrains 公司推出的和 Eclipse 齐名的 Java 集成开发环境（IDE）。</li><li><a href=https://maven.apache.org/ target=_blank>Apache Maven</a> - Apache Maven，是一个软件项目管理及自动构建工具，由Apache软件基金会所提供。是 Java 构建打包最广泛使用的工具。</li><li>MySQL，世界上最受欢迎的开源关系数据库之一。</li><li>HeidiSQL，开源数据库客户端。</li><li>Cmder 是一个美化的 Windows 命令行终端，支持 ctrl-V 粘贴。</li><li>Notepad++ 是一个开源文本编辑器，支持代码着色等多种功能，比 Windows 原生文本编辑器功能要丰富很多。</li></ul><pre><code>下载链接：https://pan.baidu.com/s/1UGHLQpBDiyICSerpv3fkAA
提取码：heis
</code></pre><h3 id=实验步骤-2>【实验步骤】</h3><ol><li>解压老师提供的项目压缩包<code>iotweb.zip</code>，并使用 IDEA 打开。</li><li>修改 IDEA 的 Maven 配置，参考实训2.1步骤5。</li><li>重新加载<code>pom.xml</code>的配置。
<img src=/static/img/iot-dev-02/Snipaste_2021-05-11_01-56-54.png alt></li><li>查看依赖的包是否已经引入。
<img src=/static/img/iot-dev-02/Snipaste_2021-05-11_01-59-04.png alt></li><li>运行<code>DemoApplication</code>。
<img src=/static/img/iot-dev-02/Snipaste_2021-05-11_02-00-37.png alt></li><li>此时浏览器访问<code>http://localhost:8099/emoji</code>，查看网页内容。</li><li>新增一个<code>SadService</code>，修改<code>EmojiController</code>的<code>EmojiService</code>依赖注入，让网页<code>http://localhost:8099/emoji</code>输出表情╭(╯^╰)╮。</li></ol></div><button id=scroll-top-btn>↑顶部</button>
<button id=switch-theme-btn>换主题</button><div id=outerdiv style=position:fixed;top:0;left:0;background:rgba(0,0,0,.7);z-index:2;width:100%;height:100%;display:none><div id=innerdiv style=position:absolute><img id=bigimg style="border:5px solid #fff" src></div></div><div id=category style=display:none;position:fixed;right:10px;bottom:10px;width:10em></div><script src=https://huangzhiyi.github.io/js/highlight.pack.js></script><script src=https://huangzhiyi.github.io/js/highlightjs-line-numbers.min.js></script><script>hljs.initHighlightingOnLoad();hljs.initLineNumbersOnLoad();$(function(){let curTheme=getCookie("theme");if(curTheme===""){setTheme("dark");}else{setTheme(curTheme);}
$('div.tbl-start').nextUntil('div.tbl-end','table').addClass('tbl');$("img").click(function(){var _this=$(this);imgShow("#outerdiv","#innerdiv","#bigimg",_this);});$("#scroll-top-btn").click(function(){document.body.scrollTop=document.documentElement.scrollTop=0;});$("#switch-theme-btn").click(function(){switchTheme();})});</script><script src=https://huangzhiyi.github.io/js/clipboard.min.js?></script><script src=https://huangzhiyi.github.io/js/codecopy.bundle.js?850></script></main><script src=https://huangzhiyi.github.io/js/heis-custom-min.js?487></script></body></html>